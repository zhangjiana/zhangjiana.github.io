---
title: 我的面试笔记
copyright: true
date: 2020-01-06 15:32:31
tags: '面试'
hidden: true
---
## 关于CDN你知道多少？CND为什么要用不同的域名

### CDN 的概念：

通过多个节点服务器，在不同区域分布，便于用户进行数据传递和访问。如果有一个服务器出问题，其他服务器仍然可以完成工作。也可以提高访问效率；

### CDN的优势：

1. 通过不同的域名来加载文件，使得同时下载文件的并发连接数大大增加。

2. 已经访问过的资源，不必再次从源头获得。比如我之前在一个网站用过jquery, 我再次进第二个网站的时候也用到了jquery, 由于该文件已经缓存了，那我就不用再下载了。

3. CDN本身具有更好的可用性，更低的网络延迟和丢包率。

4. 因为CDN是就近访问，可以提供本地的数据中心，即便是远离你访问的主网站地址，用户也能就近很快的下载文件。

5. CDN能够分配负载，节省带宽，提高你网站的性能，降低网站托管的成本。  

### CDN使用不同域名的优势：

1. 由于浏览器对同一个域名有并发限制， 使用不同域名可以增加并发下载的数量。

2. 国内的话可能有一部分监管的原因，如果有一个子域名下出现不和谐内容可能导致整个挂掉，用不同主域名可以规避这样的问题

3. 跨域不会传递 cookie，高并发时可以有效减少网络流量，提高性能

## 事件循环

js是单线程的语言，每次收到任务后，如果是同步任务，则执行；如果是异步任务，则放到事件队列中，等空闲的时候再来执行。
异步任务又分为 宏任务 和 微任务。处理的时候，如果有微任务则执行微任务，然后再执行宏任务。
`setTimeout, setInterval` 为宏任务， `async promise` 为微任务。

## http头部的报文有哪些

http 一般包括: 通用头部， 请求/响应头部， 请求/响应体

通用头部:

```javascript
Request Url： 请求的web 服务器地址
Request Method： 请求的方法
Status Code： 请求的返回状态码
Remote Address： 请求的远程服务器地址（IP）形式

```

请求头部:

```javascript
Accept： 接收类型，表示浏览器支持的MIME类型, 对标服务端的Content-type, 常见的有 application/json, text/plain
Accept-Encoding： 浏览器支持的压缩类型,如gzip等,超出类型不能接收
Accept-Language： 浏览器支持的语音
Cache-Control： 请求和响应遵循的缓存机制， 如果是no-cache，则表示告诉服务器我这里不想缓存
If-Modified-Since： http1.0的, 对应服务端的Last-Modified，用来匹配文件是否改动，精确到秒级别
Expires： 缓存机制，表示多少时间里不再向服务端请求， 使用缓存。 http1.0的
Max-age： 表示资源在本地缓存多少秒， 不超过这个时间，就用缓存，不向服务端请求。 http1.1的
If-None-Match：对应服务端的ETag，用来匹配文件内容是否改变（非常精确），http1.1中
Cookie： 有cookie 并且同域的时候会带上。
Connection： 这个表示当客户端与服务器有长连接的时候如何处理， 一般是keep-alive;
HOST： 请求的主机Url
Origin： 请求从何处发出
Referer： 页面来源
User-Agent：用户客户端的一些必要信息，如UA头部等
```

响应头部:

```javascript
Access-Control-Allow-Headers： 服务端允许的请求Headers
Access-Control-Allow-Methods： 服务端允许的请求方法
Access-Control-Allow-Origin： 服务端允许的请求来源，常常用来设置一个域名，解决跨域问题
Content-Type：服务端返回的实体内容的类型,
Date：数据从服务器发送的时间，
Cache-Control：告诉浏览器采用什么样的缓存， 如果是no-cache，那么浏览器下次的时候会再次请求服务端，如果是max-age=20000。 那就是告诉浏览器，20000秒内不要来请求，用缓存。
Last-Modified：请求资源的最后修改时间
Expires：应该在什么时候认为文档已经过期,从而不再缓存它
Max-age：客户端的本地资源应该缓存多少秒，开启了Cache-Control后有效
ETag：请求变量的实体标签的当前值
Set-Cookie：设置和页面关联的cookie，服务器通过这个头部把cookie传给客户端
Keep-Alive：如果客户端有keep-alive，服务端也会有响应（如timeout=38）
```

## 为什么请求中有OPTIONS

预检请求



## 实现 `add(1)(2)(3) => 6`

```javascript
// 函数柯里化
function add(a) {
    var sum = function (b) {
        if (b) {
            a = a + b
            return sum
        } else {
            return a
        }
    }
    sum.toString = function() {
        return a
    }
    return sum
}
```