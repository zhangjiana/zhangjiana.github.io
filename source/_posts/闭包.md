---
title: 闭包
copyright: true
date: 2022-03-01 19:47:25
tags:
---

闭包是指访问了另一个函数作用域中的变量的函数。通常是在嵌套函数中实现。

```js
function createComparisonFunction(propertyName) {
    // 匿名函数
    return function (object1, object2) {
        let value1 = object1[propertyName]; // 这里匿名函数引用了外部函数的propertyName 变量， 所以我们称这个匿名函数是闭包。
        let value2 = object2[propertyName];
        if (value1 > value2) {
            return 1
        } else if (value1 < value2) {
            return -1
        } else { 
            return 0
        }
    }
}
```
内部的这个匿名函数的作用域链，包含了外部函数`createComparisonFunction`的作用域。


## 应用场景

### 管理私有变量和私有方法
```js
var Person =function() {
    var name = 'monk';
    var age = 1;
    this.getName= function() {
        return name
    };
    this.getAge=function() {
        return age
    }
}
var p1 = new Person()
p1.name // undefined
p1.age // undefined
p1.getName() // monk
p1.getAge() // 10

```

### 将代码封装成一个闭包形式，等待时机成熟的时候再使用， 如实现柯里化和反柯里化

柯里化--- 把一个多参数的函数，转化为单参数函数。
```js
// 柯里化之前
function add(x, y) {
  return x + y;
}

add(1, 2) // 3

// 柯里化之后
function add(x) {
    return function(y) {
        return x + y
    }
}
add(1)(2)
```
至于为什么要柯里化? 就是某些情况下，只允许函数传单个参数，所以需要把传多个参数的函数进行转化。
参考：href[https://www.ruanyifeng.com/blog/2017/02/fp-tutorial.html]

