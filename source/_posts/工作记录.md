---
title: 工作记录
copyright: true
date: 2021-02-25 17:24:11
tags: 日常
---

## 1. 使用iframe的时候，自动改变iframe 的高度
场景： A页面使用iframe 把B页面嵌入进去。B页面有几个tab切换，所以需要随时的更新 iframe 的高度。
方案： 使用postMessage

A页面
```javascript
    window.addEventListener('message', (event) => {
      const { data, origin } = event
      console.log(data)
      if (!origin) return
      this.height = data.height
    }, false)
```

B 页面发送message, 在需要告知A页面中ifrme的高度的时候，就触发这个方法。实时更新iframe 的高度
```javascript
    let height = document.querySelector('.mall-wrapper').clientHeight
    window.parent.postMessage({ height }, targetOrigin)
```


## 2. 使用.bablerc 配置无效，但是在webpack.config.js的babel-loader里面配置有效
原因是因为使用的babel-loader 是 7版本以上， 配置文件要使用babel.config.js
